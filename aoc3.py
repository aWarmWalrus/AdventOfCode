inp = [".#.#....###..#.#..............# ", "#......#####..##.##.#.......#.# ", ".###.....#..#.#..#..#.#......#. ", ".........##.#.....#.#.......... ", "........##....#.......#.#..#..# ", "#.#..####...#.....#.#.#...#.... ", "#....#...#.........#.....#..#.# ", ".#..........#..#.............#. ", "...##..##..#...####.#.#.#.#.... ", ".#...####............##....#... ", "..##.....#.#......#......#.#.#. ", "..##......#..##.....#.#.....#.# ", "..#...#....#.#.........##...... ", "#..##..##..#..##....#....##.#.# ", "..###.#....#.#.#...#......#.#.# ", "....#...#...#.........#.....##. ", ".#..#.#..........#.##.....#.#.. ", ".#...#...###..#..#..####.#...#. ", "##..............#..#.#...###..# ", ".#..#.#.#...#..#...#..#........ ", "..#.#......#.#..##...#.#..#.... ", "...#.#.....#.##..#...#..#...... ", "...#...##....##..#....#..#...#. ", "#......##.#.......#...#..#.#... ", ".#..#......####...#............ ", "...#..##.#...#....#.#.#.#...... ", "....##...........##.#.#...##... ", "#.##.###........#..###.#..##... ", "....#......#....##...##.#...... ", "#.............#...#.........#.. ", "..##.......#.......#.#...#...#. ", "...#....####...#...#....#.###.. ", "...##......#...###.#...#....#.. ", "...#.............#...#.......#. ", "...#..#.##.##.#..#.##.#..#....# ", "..####.....#..#............#... ", "##....##..#.#.#.#..#..#.....#.. ", "......##...##......#.#......... ", "#.#............#.#.#..#......#. ", "...#.#.#.....#..#..#.#..##..... ", ".#.#.............###..#....##.. ", "....#.###..#..#.....#..#.##.... ", "..#.#....#.......#.......##..#. ", ".#.##.#.#..#..##.........##.... ", "...#...###.##....#####.......#. ", "......#.....##...##...#....#.#. ", "###.......##..#.....#......#.#. ", "...#..#..#....#.#.....##..#...# ", "..#....##.......#....#......... ", "#....##.........##......#.#..#. ", "#.....#.#.#..##..#.#.....##.... ", "......#....#...#...#.###....##. ", "#...####...###.##..#.#.#..##... ", "......###....###..##......#..## ", ".#.####.###..#.....#...#..#...# ", ".###.#.....#..#.#..#.....##..## ", "...##...#.####....#......###... ", "...##.......#.#..#......#.#.... ", "......##....#......#.........#. ", "............#....#............# ", "..#.#..........#......#..#..... ", ".#...#.#.#......#..##..#....##. ", "..##.#.#.#..#...###..#.#.##.#.. ", "..#......#.........#.......#... ", "...#...##.#.##......#.....#.... ", "..#.....#..##....#..##..#.#.##. ", "....##....#.#...#..##.##.##.... ", "..#.............#...#......#... ", ".#.#.#.##..#.#..##...#......... ", ".##...........#..#.#........#.. ", ".#..##.....#....#...#...#...... ", "#.#.....##.#..#...######....#.. ", "....#..#...##...#.........###.. ", "..##.#...##..#......#.##..#...# ", "##..##...........#.......#.#... ", ".......##..##...###.##.......#. ", ".#.##...#.##...............#... ", ".......#.............#.......## ", "......#...........#...#..##.... ", ".#..#..#....#..........#......# ", "...........#..#.....#....##.... ", "###....#....##..#..##.....##... ", "#........#........#...#.##.##.. ", "##.#.#........#..#.#..#.......# ", ".##.#.....#............#....... ", ".....#........#..##......##.... ", ".#.####.#.##..................# ", "#...##.......#...#....#.#.##... ", "#.#.##...#.#......#.....#....#. ", ".........#....#...#....#.....#. ", "...#..#..#.#..#.##........##.#. ", "..#.##.#...#...#....#....##..#. ", ".#..#...####..........#.......# ", "....#...#...#...##.#.##......#. ", ".#....#...#.#..##..##.#.....#.. ", ".....#....#......#.#####...###. ", "..#...##..#......#.#....#.....# ", ".##....##..###.#.....##.##.##.. ", "#...#.#.........#....#....#.... ", "...#.........#.##....##.#.#.#.. ", "...#...#.#....#..#.#.......#.#. ", "#......#..#....##....#......... ", "...........#......#......###..# ", "#..#...#..##..#....#.....#.#.#. ", "#.#.....##..#..........###..#.. ", "#...#.....#.......#..##...#.... ", "...#....##.....#..##..#....#... ", "#...#.#......#..#...#........#. ", ".#....#...#...#.........##....# ", "..##...#.........#.......##..#. ", "......#.......#.....##....#..#. ", ".....##..#...#............#.#.# ", "...#....#.##..#...#.#....#..... ", "...#...........#.##....#..##.## ", "##......##....##...........#.#. ", "..##..##......#...#.##.##..#... ", ".#..##.#...##...#......###.##.# ", "###.#....##..#..#.##..##...##.. ", "..#........##.#...#.......#.... ", ".....##....##.#.###.....#....#. ", "#.##....#....##.....#..#.#..... ", "#.........#..##...##.......##.. ", ".#....#......#.#...##.......... ", "##..##.....##....###..#...#.#.# ", "..##.#.#..#......#.#....###..#. ", ".#.##.....##.......##.#.##..#.. ", "..##...#........#.#.#.##.#..### ", "........#.......#...##....#.#.. ", "...#..#...#.##..#...#.#.###.##. ", "..#.#....#..#...#..##.........# ", "#....#..##..##....#.........#.. ", ".......#.......#....#....#.#... ", "...#.##...#...#..#....#.###.##. ", "##.##...#..........#....#...... ", "#.##.#.....#..#............##.# ", ".##...#.#.#.##...........#..##. ", ".#...#....#.......##...##...#.# ", ".#......#..#...#...#....#.#.... ", "...#..#..#...#..##..##.....#..# ", ".#.##..#.#...#..#.#...#...#...# ", "#.##..........#.##..#....#..... ", "##....#.#..........#..#....#... ", "..#..##.#.......#...#.##......# ", "....##......#......#.#.#.##.... ", "###......#...##..#..........### ", "##.#.##.....###.#..#.#......#.. ", "#.#.#........#..........#....#. ", "...#.#..#.......#......##.#.... ", "......#.....#.#.#....###..#...# ", ".........#...#..#####..#.#..#.. ", "..........#.#.#####.#..#.....#. ", "....#.......#.#....#.....##..#. ", "#...##.#..#.#........#.#..#..## ", "#......#..#.#.....##......#.##. ", ".##...#....#.##..#.....###..#.. ", "#....#.#..##....##..#.#####.... ", ".......##..........#......#.... ", "......#.#...#............#..... ", ".......###.....##.#..#.#....#.# ", "...#...#..........#....##...##. ", ".#..#.#.#....#.#.....##..#.#..# ", "......#.#..#....#..#...#....... ", "##.#####............#.#.####.#. ", "#.....###.#.......##...###....# ", "......#.##..##.........#.#..... ", ".#.#......#..#.##......#......# ", ".#.#.#..#.#...##.....#..#.#..#. ", ".#.#....#...................... ", "#.#..###...#...####.##.#....#.# ", ".....#............#....#..#.##. ", "#..#...#.#....#....#..#..#...#. ", "...#.......#..#.#....#.......#. ", ".#..#.#...#.#.####..#...#....## ", "....#..#..............####....# ", ".....#.#.###....#.#.#.#...#.... ", "..####..#.#.##.##.##....#..#... ", ".#.#.#.###..#.##..............# ", "..#.#..#...#.....#.......#.##.. ", ".#.#..#.....##...###.....#..#.. ", "..#..#......#.##..#......##..#. ", ".....#.#.#..##..###.#.......... ", ".##......#...#.##.......#..#..# ", ".......#...#.....###.##...##... ", "..##..#.#.......#.............. ", "#.....#......#.#..#..#..#...... ", "..###.......##...#.##....#..... ", ".....##...........##.....#...## ", ".#.#.####....###.#.......#...## ", "#.#..##.#.#.....#.#....#....... ", ".........#.#..#...............# ", "..##.#..#..#####.###.........#. ", ".#........#...#...#...#.##.#..# ", ".#.##..........#..##....#.#.#.. ", ".##......#....#.#....##.#.#.#.. ", ".......##.####..#..#.#..#.#...# ", "...#.....#..##..###.#..##...#.. ", "#.......##..#####....#.......#. ", "#.#.##.................#...###. ", "................####........... ", ".#..#......#...###............. ", "......#.#.##.##.....#.......... ", ".......#..#.#............##.... ", "#........#..#....#......#.####. ", "...#.#....##..#..#............. ", "..#.#......#...#.#..#.......... ", "###...###...........#......#... ", "#.###..###........###...#..###. ", ".#.....#...#.#...........##.... ", "....#..##.....#..#......#...... ", "#.###.#........#.#.##.......... ", "#.#.#.#.#..#.#...#...##.#...... ", "..###.......###..#.#.#.#.#..... ", "...#........#.......#.###..##.. ", ".#........#...#.#........#..##. ", "#.......###..#....##.###...#..# ", ".##....###..##...........##...# ", "#...#..........#.....#..##..#.. ", "#..##..#..##.#.........##...... ", "..#.#..###..###.....#.......#.. ", "#...#...........##.#.#.###..... ", "...#....#.....#.....#.##.#.##.# ", "...........##.......####...#..# ", "#.#...#..##..#.#..#..........#. ", "..#...#.##........#.#.......... ", ".##.....#.#.#....#.#.......#.#. ", ".......#.##...#.##....#.#...#.. ", "......#...##...###...#.....###. ", "##......#.##.####.##...##...... ", "..#....#.#..###.#..##....#..#.. ", "...##..###.....###.....#....... ", "...#.....#.#........#..#..##.#. ", ".....................#.....#.#. ", ".#...#...##.#..#..........#...# ", "#.....#..#....#..#.......####.. ", ".##.......##......###.#..#...## ", ".#.##..#...#..........##....... ", "...##...........##..##......#.. ", "#....##.##...#......##.#.##.##. ", "..##.##.#.#.#....#........#.#.. ", "....#......#......##..##.#.#... ", ".............#.##...#..#...#... ", ".#..#...#.........#...........# ", "....#.....#..................#. ", "........##............#...#..## ", ".###.....##...#...#.##.....##.. ", "...##.#.........##.#.#..#...... ", "#...........##.#..#........#..# ", "....#....#..##.#..##..#..#..#.# ", "#..##..#............#...#.#.#.. ", "#......#..##......#...##..#...# ", "....#.#..##.#.#...####...#..... ", ".##..#..##....#...#....#...##.# ", "##.....#.#........#....#.#.#... ", "......#.#...##....#.###.....#.# ", "..#..#............###.###.##.#. ", "#..#.##.##.##..#...#.#.##..#... ", "....#..#.#...#......#..###..... ", ".#........#...###.....#...#.... ", "....##.##....#..#...#.#####.#.# ", "...#..#...#.#.....#....#...###. ", "..........####...##............ ", ".....#....##...##......#..#...# ", "..#...#.####......#...#..#..### ", ".#.....#....#..#...###..#.#.... ", "..#..#......#.#...#.....##....# ", ".....##....#....#...#.....##... ", "#............##.#....#.#.#..#.. ", "#......#......#....#.#..##.#... ", "#.#......##.....#.#..##.#.#.... ", ".#.###..#.#......##...........# ", "#.#.........##..#.#.##......#.. ", "##....####...##...........#.... ", "....###.#..##.#.#.##...##.....# ", "..###.......##.......#......#.. ", "..#.###.##.#................... ", "...#.#...#..#..#..##.###...#.#. ", "#...#..#...#..#....#..#...#.... ", "....#........#.#.#.##.##.#..#.# ", "...#....#.#...#..#....#.#.#.... ", "..#...#..##.#....##...###...##. ", "#......#.....#.....#....####.#. ", "...##.#..#.#.....#..#..##.#.... ", ".####.#..#...#.#......#......#. ", "..#.#....#..#..##.#......##.... ", "....#...#.#..#...#...##........ ", "##..#.#....#..#.........#..##.. ", "...#.......#....#..##...###..## ", "#......##.#..#..#..#..###.#.### ", ".#..##.#...##...#.............# ", "###.........#...###.#.#..#....# ", ".#.....#..#........#.#.......#. ", "#..#.#.....#.........###..#.... ", "#..##.....#.#....#.###.....#..# ", "....#..#.......##..#.#..##....# ", "##.##..#....#..#.#.###......... ", "..##....#........#..#..#.##.#.# ", ".#....#...##..#.#.....#..##..#. ", "#..#.......#......#...#...#.##. ", "...##.#......#.#..#......#..... ", "......#...#.##.#....#...#.##.#. ", "#.....#..#.#.#...##...#........ ", "....#.#..#.#.....#....#.#..#... ", "....#.#...###............#..... ", ".#.#...##.......#....#.##...#.# ", ".....#.##......#.#..#...#....#. ", ".###....#...#........#......... ", "..#.....#..#.#.#..##...#..#.... ", "...###..#....#.....#.........## ", "#....#....###...#.#............ ", ".#..##.....#...........#.#..#.. ", "..#.#.#.......##..#.#.......... ", ".#...#...####.#...#####.....#.# ", "..#....##.....#..#...#......... ", "#.#......#.##.........#......## ", "..#.#...#.##..#....#....#.##... ", "#....#......##.#..#......#.#.#. ", "#.#.............##..#.#........ ", "..#.###.......##.....##.#..##.# ", ".........#........#...#..#....# ", ".........##.#.#..#..#....#....# ", "##..#..#.#.....##.........#.#.# ", "..##.##..#.##..........##.#..#. ", "...#..#####.......#.........#.."]
inp_ex = ["..##.......", "#...#...#..", ".#....#..#.", "..#.#...#.# ", ".#...##..#. ", "..#.##..... ", ".#.#.#....# ", ".#........# ", "#.##...#... ", "#...##....# ", ".#..#...#.#"]

def getX(y, slopeX, slopeY, maxLength):
  return (slopeX * y / slopeY) % maxLength

def printDebug(line, x):
  debug = "{}{}{} ".format(line[0:x], 'O' if line[x] == '.' else 'X', line[x+1:])
  print debug, x, "tree" if line[x] == '#' else ""

def numTrees(lines, slopeX, slopeY=1, debug=False):
  lineLen = len(lines[0].strip())
  treeCount = 0
  for y in range(slopeY, len(lines), slopeY):
    x = getX(y, slopeX, slopeY, lineLen)
    if debug:
      printDebug(lines[y], x)
    if lines[y][x] == '#':
      treeCount += 1
  return treeCount

print numTrees(inp, 1)
print numTrees(inp, 3)
print numTrees(inp, 5)
print numTrees(inp, 7)
print numTrees(inp, 1, slopeY=2)

print numTrees(inp, 1) * numTrees(inp, 3) *numTrees(inp, 5)*numTrees(inp, 7)*numTrees(inp, 1, slopeY=2)
